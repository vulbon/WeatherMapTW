L.Control.Sidebar=L.Control.extend({includes:L.Evented.prototype||L.Mixin.Events,options:{closeButton:!0,position:"left",autoPan:!0},initialize:function(t,i){L.setOptions(this,i);var n=this._contentContainer=L.DomUtil.get(t);n.parentNode.removeChild(n);var o="leaflet-",e=this._container=L.DomUtil.create("div",o+"sidebar "+this.options.position);(L.DomUtil.addClass(n,o+"control"),e.appendChild(n),this.options.closeButton)&&((this._closeButton=L.DomUtil.create("a","close",e)).innerHTML="&times;")},addTo:function(t){var i=this._container,n=this._contentContainer;if(this.options.closeButton){var o=this._closeButton;L.DomEvent.on(o,"click",this.hide,this)}L.DomEvent.on(i,"transitionend",this._handleTransitionEvent,this).on(i,"webkitTransitionEnd",this._handleTransitionEvent,this);var e=t._controlContainer;e.insertBefore(i,e.firstChild),this._map=t;var s=L.DomEvent.stopPropagation,r=L.DomEvent._fakeStop||s;return L.DomEvent.on(n,"contextmenu",s).on(n,"click",r).on(n,"mousedown",s).on(n,"touchstart",s).on(n,"dblclick",r).on(n,"mousewheel",s).on(n,"MozMousePixelScroll",s),this},removeFrom:function(t){this.hide();var i=this._container,n=this._contentContainer;t._controlContainer.removeChild(i),this._map=null;var o=L.DomEvent.stopPropagation,e=L.DomEvent._fakeStop||o;if(L.DomEvent.off(n,"contextmenu",o).off(n,"click",e).off(n,"mousedown",o).off(n,"touchstart",o).off(n,"dblclick",e).off(n,"mousewheel",o).off(n,"MozMousePixelScroll",o),L.DomEvent.off(i,"transitionend",this._handleTransitionEvent,this).off(i,"webkitTransitionEnd",this._handleTransitionEvent,this),this._closeButton&&this._close){var s=this._closeButton;L.DomEvent.off(s,"click",this.hide,this)}return this},isVisible:function(){return L.DomUtil.hasClass(this._container,"visible")},show:function(){this.isVisible()||(L.DomUtil.addClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([-this.getOffset()/2,0],{duration:.5}),this.fire("show"))},hide:function(t){this.isVisible()&&(L.DomUtil.removeClass(this._container,"visible"),this.options.autoPan&&this._map.panBy([this.getOffset()/2,0],{duration:.5}),this.fire("hide")),t&&L.DomEvent.stopPropagation(t)},toggle:function(){this.isVisible()?this.hide():this.show()},getContainer:function(){return this._contentContainer},getCloseButton:function(){return this._closeButton},setContent:function(t){var i=this.getContainer();if("string"==typeof t)i.innerHTML=t;else{for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(t)}return this},getOffset:function(){return"right"===this.options.position?-this._container.offsetWidth:this._container.offsetWidth},_handleTransitionEvent:function(t){"left"!=t.propertyName&&"right"!=t.propertyName||this.fire(this.isVisible()?"shown":"hidden")}}),L.control.sidebar=function(t,i){return new L.Control.Sidebar(t,i)};

