$(document).ready(function(){var o=L.latLngBounds(L.latLng(21.88,118.12),L.latLng(25.44,122.49)),t=L.map("map",{attributionControl:!1,zoomControl:!1}).fitBounds(o);L.control.zoom({position:"bottomright"}).addTo(t);var e=L.tileLayer("http://maps.nlsc.gov.tw/S_Maps/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=EMAP&STYLE=_null&TILEMATRIXSET=EPSG:3857&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&FORMAT=image/png",{maxZoom:19});t.addLayer(e);var n={control:L.control({position:"bottomright"}),opened:!1};n.control.onAdd=function(o){var t=L.DomUtil.create("div","leaflet-bar");return t.style.backgroundImage="url(style/images/geolocation.png)",t.style.backgroundSize="20px 20px",t.style.width="30px",t.style.height="30px",t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="center",t.style.backgroundColor="white",t.style.cursor="pointer",L.DomEvent.addListener(t,"click",L.DomEvent.stopPropagation).addListener(t,"click",L.DomEvent.preventDefault).addListener(t,"click",function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){o.setView([t.coords.latitude,t.coords.longitude],16),r.go([t.coords.latitude,t.coords.longitude]),r.range([t.coords.latitude,t.coords.longitude],t.coords.accuracy)})}),t},n.control.addTo(t);var r={go:function(o){var t=this;if(this.marker)this.marker.setLatLng(o).addTo(this.layers);else{this.marker=L.marker(o,{icon:L.icon({iconUrl:"style/images/pin_red.png",iconSize:[40,40],iconAnchor:[20.5,37],popupAnchor:[0,0]})});L.Util.stamp(this.marker);this.marker.on("click",function(){t.remove()}).addTo(this.layers)}},range:function(o,t){var e=this;if(this.circle)this.circle.setLatLng(o).setRadius(t).addTo(this.layers);else{this.circle=L.circle(o,t),this.circle.setStyle({color:"#00BCD4",fillColor:"#00BCD4"});L.Util.stamp(this.circle);this.circle.on("click",function(){e.remove()}).addTo(this.layers)}return this.circle.getBounds()},remove:function(){this.layers.clearLayers()},layers:L.layerGroup().addTo(t)},i=L.control.sidebar("right_panels",{closeButton:!0,autoPan:!1,position:"right"}).on("hide",function(){a.opened=!1}).on("show",function(){a.opened=!0});t.addControl(i);var a={control:L.control({position:"topright"}),opened:!1};a.control.onAdd=function(o){var t=L.DomUtil.create("div","leaflet-bar");return t.style.backgroundImage="url(style/images/menu.png)",t.style.backgroundSize="20px 20px",t.style.width="30px",t.style.height="30px",t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="center",t.style.backgroundColor="white",t.style.cursor="pointer",L.DomEvent.addListener(t,"click",L.DomEvent.stopPropagation).addListener(t,"click",L.DomEvent.preventDefault).addListener(t,"click",function(){a.opened?i.hide():i.show()}),t},a.control.addTo(t)});